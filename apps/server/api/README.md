# API Server

dskhysãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®APIã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Runtime**: Node.js
- **Language**: TypeScript
- **Framework**: Express
- **Database**: SQLite3
- **Authentication**: JWT (JSON Web Token) + bcrypt
- **Validation**: Zod
- **Testing**: Vitest + Supertest
- **Linting**: Biome

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰:

```bash
npm install
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
cp .env.example .env
```

### 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

## ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

- `npm run dev` - é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ä»˜ãï¼‰
- `npm run build` - TypeScriptã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
- `npm start` - æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
- `npm test` - ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼‰
- `npm run test:run` - ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆ1å›ã®ã¿ï¼‰
- `npm run typecheck` - å‹ãƒã‚§ãƒƒã‚¯ã®ã¿å®Ÿè¡Œ

## API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

- `GET /health` - ã‚µãƒ¼ãƒãƒ¼ã®ç¨¼åƒçŠ¶æ³ã‚’ç¢ºèª

### èªè¨¼

- `POST /api/auth/register` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
- `POST /api/auth/login` - ãƒ­ã‚°ã‚¤ãƒ³
- `POST /api/auth/logout` - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼ˆè¦èªè¨¼ï¼‰
- `POST /api/auth/refresh` - ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
- `GET /api/auth/me` - ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ï¼ˆè¦èªè¨¼ï¼‰

### API

- `GET /api/` - APIæƒ…å ±ã‚’å–å¾—

è©³ç´°ã¯ [APIä»•æ§˜æ›¸](docs/api-specification.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```txt
src/
â”œâ”€â”€ index.ts              # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ database/
â”‚   â””â”€â”€ connection.ts     # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šè¨­å®š
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ errorHandler.ts   # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚   â””â”€â”€ authenticate.ts   # èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ index.ts          # ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ã‚¿ãƒ¼
â”‚   â”œâ”€â”€ index.test.ts     # ãƒ«ãƒ¼ãƒˆã®ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ auth.ts           # èªè¨¼ãƒ«ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ auth.test.ts      # èªè¨¼ãƒ«ãƒ¼ãƒˆã®ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ users.ts          # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ«ãƒ¼ãƒˆ
â”œâ”€â”€ schemas/
â”‚   â””â”€â”€ index.ts          # Zodã‚¹ã‚­ãƒ¼ãƒå®šç¾©
â””â”€â”€ utils/
    â”œâ”€â”€ errors.ts         # ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹
    â”œâ”€â”€ jwt.ts            # JWTãƒˆãƒ¼ã‚¯ãƒ³å‡¦ç†
    â””â”€â”€ password.ts       # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–
```

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

SQLite3ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `data/database.sqlite` ã«ä½œæˆã•ã‚Œã¾ã™ã€‚

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [é–‹ç™ºã‚¬ã‚¤ãƒ‰](docs/development-guide.md) - é–‹ç™ºãƒ•ãƒ­ãƒ¼ã¨åŸºæœ¬çš„ãªä½¿ã„æ–¹
- [APIä»•æ§˜æ›¸](docs/api-specification.md) - ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®è©³ç´°ä»•æ§˜
- [ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°](docs/error-handling.md) - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®è©³ç´°
- [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚µãƒãƒªãƒ¼](docs/security-summary.md) - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã¨æ¨å¥¨äº‹é …
- [èªè¨¼ãƒ•ãƒ­ãƒ¼](../../docs/èªè¨¼ãƒ•ãƒ­ãƒ¼.md) - èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®è©³ç´°ãƒ•ãƒ­ãƒ¼
