# ポートフォリオ年間配当予想金額表示機能 - 要件定義書

## 概要

ユーザーが選択した銘柄の配当金を集計し、年間配当の予想金額をサマリー画面の上部に表示する機能。

## ビジネス要件

### 目的

保有銘柄の年間配当金を可視化し、ポートフォリオ運用における配当利回りの把握を支援する。

### ユースケース

1. ユーザーは、配当金を集計の対象とする銘柄を選択する
2. ユーザーは、各銘柄の直近 12 ヶ月の配当金額を入力または取得する
3. ユーザーは、サマリー画面で年間配当の予想金額を確認する

## 機能要件

### 1. 配当金管理機能

- **配当金データの保持**: 各銘柄に配当金情報を追加

  - 直近 12 ヶ月の配当金額（複数年分）
  - 配当金の対象月
  - 配当対象フラグ（集計対象かどうか）

- **配当金の入力方法**: 2 つのアプローチをサポート
  - 手動入力: ユーザーが直接配当金額を入力
  - 自動取得（オプション）: API から配当金情報を取得
    - Alpha Vantage, Yahoo Finance など、公開 API の利用を検討

### 2. 銘柄選択機能

- 配当金を集計対象とする銘柄を明示的に選択できる
- トグル機能で簡単に対象/非対象を切り替え可能

### 3. サマリー画面表示

- サマリー画面の上部に「年間配当予想金額」セクションを追加
- 配当対象銘柄の合計年間配当金を表示
- 配当利回り（利回り% = 配当金額 ÷ 評価額 × 100）も合わせて表示（オプション）

## 非機能要件

- パフォーマンス: 配当金計算は瞬時に完了すること
- ローカルストレージへの永続化: 配当金データはローカルストレージに保存
- オフライン対応: ネット接続がない場合でも手動入力は動作すること

## 段階的実装計画

### Phase 1 (MVP)

- 配当金の手動入力機能
- 銘柄への配当金データの関連付け
- サマリー画面での年間配当金表示（手動入力分）

### Phase 2 (拡張)

- 配当金の自動取得機能（外部 API 連携）
- 配当利回りの計算と表示

## 検討事項

1. **配当金の更新頻度**: リアルタイムか、手動更新か
2. **複数年分の配当金管理**: 過去の配当金履歴も保持するか
3. **配当金の種類**: 通常配当、特別配当の区分が必要か
4. **通貨対応**: 海外株式の配当金の扱い（円換算）
