# 要件定義：サブスク管理機能（Budget）

## 概要

Budgetアプリに、以下の4つのサブスク管理テーブルを追加する。

1. **収入予算**（収入表）
2. **支出予算**（支出表）
3. **契約中のサブスク**（契約中サブスク表）
4. **追加候補のサブスク**（サブスク追加候補表）

## 機能要件

### 1. 収入予算管理

- 収入カテゴリーおよび個別の収入項目を管理
- 各項目に月額と年額を設定可能
- カテゴリーは以下を想定：「給与」「配当」「税金・社会保障」「投資」など
- カテゴリーカラーで視覚的に区別

### 2. 支出予算管理

- 支出カテゴリーおよび個別の支出項目を管理
- 各項目に月額と年額を設定可能
- カテゴリーは以下を想定：「税金」「投資」「生活（固定）」「生活（変動）」「趣味」など
- カテゴリーカラーで視覚的に区別

### 3. 契約中のサブスク管理

- 現在契約中のサブスクリプションサービスを管理
- 各サービスに月額と年額を設定可能
- カテゴリーは以下を想定：「生活」「旅行」「エンタメ」「開発」など
- 契約更新月情報（任意）

### 4. 追加候補のサブスク管理

- 今後利用を検討するサブスクリプションサービスを管理
- 各サービスに月額と年額を設定可能
- 同一のカテゴリー体系を使用
- 契約中サブスクから追加候補へ、または追加候補から契約中サブスクへの移行機能

## UI/UX要件

### トップページ

- 4つのテーブルを水平スクロール可能なセクションで表示
- 各セクションは以下を含む：
  - セクションタイトル
  - 統計情報（合計金額など）
  - テーブル（ドラッグで挿入/削除可能）

### テーブル共通機能

- 列：カテゴリー、名前、月額（Price/M）、年額（Price/Y）、備考
- 行操作：追加、編集、削除
- ドラッグ＆ドロップで項目を削除（スワイプ対応）
- ソート機能（カテゴリー、名前など）
- フィルター機能（カテゴリー別）

## データ永続化

- LocalStorageまたはIndexedDBを使用してブラウザに保存
- PWAオフラインモードで機能

## データモデル

### 予算アイテム

```typescript
interface BudgetItem {
  id: string;
  category: string;
  name: string;
  pricePerMonth: number;
  pricePerYear: number;
  remark?: string;
}
```

### サブスクアイテム

```typescript
interface SubscriptionItem extends BudgetItem {
  renewalMonth?: string;
}
```

## 非機能要件

- パフォーマンス：大量のアイテムでも5秒以内にレンダリング完了
- アクセシビリティ：WCAG 2.1 AA 準拠
- レスポンシブ：モバイル・タブレット・デスクトップ対応
